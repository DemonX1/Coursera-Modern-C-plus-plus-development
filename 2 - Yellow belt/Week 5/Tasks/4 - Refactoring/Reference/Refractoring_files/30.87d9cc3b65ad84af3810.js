(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"1Nwa":function(module,exports,e){var t=e("ATXn"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},r=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},"3aJm":function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=i(e("oYk5")),a=i(e("KDBu")),o=i(e("fL78")),u=i(e("CQyo")),l=e("v3Zo"),d=e("PUBa"),c=i(e("yhVA")),m,p=function(e){function PeerItemVerificationSubmission(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={isSubmitting:!1,isAgreementComplete:!1,confirmedPreview:!1,showPreviewModal:!1,fullName:"",hasError:!1},t.handleSubmit=function(){if(!t.props.isVerifiable)return void t.props.handleSubmit();t.setState({isSubmitting:!0,hasError:!1});var e=null;(0,d.fetchVerifiableId)().then(function(i){return e=i,(0,d.verifyAssignment)(e,t.state.fullName)}).then(function(){null!=e&&t.props.handleSubmit(e)}).catch(function(){return t.setState({isSubmitting:!1,hasError:!0})}).done()},t.handleClickPreview=function(){t.setState({showPreviewModal:!0})},t.handlePreviewModalClose=function(){t.props.handleSave(),t.setState({showPreviewModal:!1,confirmedPreview:!0}),(0,s.default)("html, body").animate({scrollTop:0},"slow")},t.onAgreementComplete=function(e){t.setState({isAgreementComplete:!0,fullName:e})},t.onAgreementIncomplete=function(){t.setState({isAgreementComplete:!1})},t}(0,n.default)(PeerItemVerificationSubmission,e);var t=PeerItemVerificationSubmission.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props.submissionAppState.submitState===l.SUBMITTING,i=e.submissionAppState.submitState===l.SUBMITTING;t&&!i?this.setState({isSubmitting:!1}):!t&&i&&this.setState({isSubmitting:!0})},t.render=function render(){var e=this.props,t=e.submissionAppState,i=e.lastSaveTime,n=e.handleSave,s=e.isVerifiable,d=e.computedItem,m=e.blockSubmit,p=this.state,f=p.isAgreementComplete,b=p.isSubmitting,v=p.hasError,h=(0,c.default)("Preview"),S=this.handleClickPreview;return this.state.confirmedPreview&&(h=(0,c.default)("Submit"),S=this.handleSubmit),r.createElement("div",{className:"rc-PeerItemVerificationSubmission",style:{marginTop:30}},s&&r.createElement(o.default,{onAgreementComplete:this.onAgreementComplete,onAgreementIncomplete:this.onAgreementIncomplete,isShownInsideModal:!1}),r.createElement(a.default,{lastSaveTime:i,isSaving:t.saveState===l.SAVING,isSubmitting:b,onSave:n,onSubmit:S,submitMessage:h,isSubmitDisabled:s&&!f||m,computedItem:d}),v&&r.createElement("div",{className:"align-right caption-text",style:{marginTop:12}},(0,c.default)("An error has occurred while submitting. Please try again.")),this.state.showPreviewModal&&r.createElement(u.default,{className:"rc-SubmissionPreviewModal",handleClose:this.handlePreviewModalClose,modalName:(0,c.default)("Ready to Submit?")},r.createElement("h3",{className:"headline-4-text title"},(0,c.default)("Ready to Submit?")),r.createElement("div",null,(0,c.default)("Great work! Before you submit, please take a moment to look over your work once more so that\n               you can get a preview of what it will look like to others who will be reviewing your work.")),r.createElement("div",{className:"horizontal-box align-items-right"},r.createElement("button",{className:"primary",onClick:this.handlePreviewModalClose},(0,c.default)("Preview")))))},PeerItemVerificationSubmission}(r.Component);exports.default=p},"3l+J":function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=i(e("QgSF")),a=i(e("3aOx"));e("i5JE");var o,u=function(e){function AssignmentSubmitEditView(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handleTitleChange=function(e){e.target instanceof HTMLInputElement&&t.props.updateSubmissionTitle(e.target.value)},t}var t;return(0,n.default)(AssignmentSubmitEditView,e),AssignmentSubmitEditView.prototype.render=function render(){var e=this,t=this.props,i=t.courseId,n=t.submission,o=t.submissionSchema,u=t.errorTree,l=t.isSubmitted,d=t.submissionAppState,c=d.saveState,m=d.submitState,p=d.showValidation,f=t.renderInlineNode,b="saving"===c||"submitting"===m||l;return r.createElement("div",{className:"rc-AssignmentSubmitEditView"},r.createElement("input",{className:"c-peer-review-submit-text-field bt3-form-control",type:"text",defaultValue:n.title,placeholder:"Give your project a descriptive title",onChange:this.handleTitleChange,disabled:b}),p&&r.createElement(a.default,{errorTree:u}),r.createElement("div",{className:"parts"},o.parts.map(function(t){var a=null;return a=n.parts&&n.parts[t.id]?n.parts[t.id]:n.invalidParts[t.id],r.createElement(s.default,{courseId:i,key:t.id,partId:t.id,submissionSchemaPart:t,submissionPart:a,update:e.props.updateSubmissionPartGenerator(t.id),blockSubmit:e.props.blockSubmitPartGenerator(t.id),disabled:b,errorTree:u&&u.children[t.id],showValidation:p,renderInlineNode:f})})))},AssignmentSubmitEditView}(r.Component);exports.default=u},"5xxS":function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=i(e("VYij")),a=i(e("8cuT")),o=e("MnCE"),u=i(e("w/1P")),l=i(e("wO3E")),d=i(e("CLws")),c=i(e("Akn8")),m=function(e){function SubmissionEditButton(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={showModal:!1},t.openModal=function(){t.setState({showModal:!0})},t.closeModal=function(){t.setState({showModal:!1})},t}(0,n.default)(SubmissionEditButton,e);var t=SubmissionEditButton.prototype;return t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=this.props,i=t.hasLoaded,n=t.isSubmitted,r=t.computedItem;i&&n&&!e.isSubmitted&&(this.context.router.push(c.default.join(r.resourcePath,"submit")),this.closeModal())},t.render=function render(){var e=this.props,t=e.hasLoaded,i=e.canDelete,n=e.submissionId,s=e.computedItem,a=e.className,o=e.courseId,c=e.courseSlug,m=e.buttonMessage;if(!t)return null;return r.createElement("div",null,r.createElement("div",{className:(0,u.default)("rc-SubmissionEditButton",a)},r.createElement(l.default,{className:"button secondary",disabled:!i,onClick:this.openModal,trackingName:"edit_project"},m)),this.state.showModal&&r.createElement(d.default,{showModal:!0,computedItem:s,onModalClose:this.closeModal,submissionId:n,courseId:o,courseSlug:c}))},SubmissionEditButton}(r.Component);m.contextTypes={router:r.PropTypes.object};var p=(0,o.compose)((0,a.default)(["PeerPermissionsAndProgressesStore","CourseStore"],function(e){var t=e.PeerPermissionsAndProgressesStore,i=e.CourseStore,n,r,a;return{hasLoaded:"loaded"===t.getState().loadState,canDelete:(0,s.default)(t.getState().capabilities).contains("deleteSubmission"),isSubmitted:t.getState().isSubmitted,courseId:i.getCourseId(),courseSlug:i.getCourseSlug()}}))(m);exports.default=p},"6qoN":function(module,exports,e){},"9KgU":function(module,exports,e){},ATXn:function(module,exports,e){},"B2B+":function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=t(e("8cuT")),n=t(e("VXRf")),r=t(e("VYij")),s=t(e("jsrg")),a=t(e("Nw0Z")),o=t(e("dPJa")),u=r.default.compose((0,i.default)(["PeerPermissionsAndProgressesStore"],function(e,t){var i=e.PeerPermissionsAndProgressesStore;return{hasLoaded:"loaded"===i.getState().loadState,capabilitiesWithReasons:i.getState().capabilitiesWithReasons}}),(0,s.default)(function(e){return e.hasLoaded}),(0,n.default)(function(e){var t=!1,i=e.capabilitiesWithReasons.viewReviewSchema,n;return null!=i&&(t=i.isAllowed&&"privilegedRole"===i.reason),{criteria:(0,a.default)(e.reviewSchema).getPartsForSubmissionSchemaPart(e.partId),privilegedRoleViewReviewSchema:t}}))(o.default);exports.default=u},C6SX:function(module,exports,e){var t=e("gOLI"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},r=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},CLws:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=i(e("sQ/U")),a=i(e("CQyo")),o=i(e("wO3E")),u=e("ih6J"),l=i(e("yhVA"));e("JOPA");var d=function(e){function SubmissionDeleteModal(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={deletionInProgress:!1},t.handleSubmissionDelete=function(){var e=t.props,i=e.submissionId,n=e.computedItem.id,r=e.courseId,a=e.courseSlug,o=s.default.get().id;t.setState({deletionInProgress:!0}),t.context.executeAction(u.resetSubmission,{itemId:n,submissionId:i,userId:o,courseId:r,courseSlug:a})},t}var t;return(0,n.default)(SubmissionDeleteModal,e),SubmissionDeleteModal.prototype.render=function render(){return this.props.showModal?r.createElement(a.default,{className:"rc-SubmissionDeleteModal",handleClose:this.props.onModalClose,modalName:(0,l.default)("Have you reviewed your feedback?")},r.createElement("h3",{className:"headline-4-text title"},(0,l.default)("Have you reviewed your feedback?")),r.createElement("p",null,(0,l.default)("\n              Your feedback on this submission will be deleted when you start editing your project. You can resubmit\n              your project for feedback when you finish editing.\n            ")),r.createElement("div",{className:"c-modal-action-bar"},r.createElement(o.default,{className:"passive",onClick:this.props.onModalClose,trackingName:"edit_project_cancel"},(0,l.default)("Cancel")),r.createElement("button",{disabled:this.state.deletionInProgress,className:"primary submission-button",onClick:this.handleSubmissionDelete},this.state.deletionInProgress?(0,l.default)("Loading..."):(0,l.default)("Edit my submission")))):null},SubmissionDeleteModal}(r.Component);d.contextTypes={executeAction:r.PropTypes.func};var c=d;exports.default=c},Dyy4:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageUploadOptions=getImageUploadOptions,exports.default=exports.richTextBlocks=exports.EMPTY_CML=void 0;var i=t(e("PGBY")),n={typeName:"cml",definition:{dtdId:"assess/1",value:"<co-content><text></text></co-content>"}};function getImageUploadOptions(e,t){return{context:{courseId:e,itemId:t},pendingAssetCreation:{assetType:"image",typeName:"pending",tags:[]},assetCreationUrl:"/api/onDemandPeerAssetCreationAttempts.v1"}}exports.EMPTY_CML=n;var r=[i.default.Bold,i.default.Italic,i.default.Underline,i.default.Divider,i.default.Link,i.default.Unlink,i.default.OrderedList,i.default.UnorderedList,i.default.Code];exports.richTextBlocks=r;var s={getImageUploadOptions:getImageUploadOptions,richTextBlocks:r};exports.default=s},Exuz:function(module,exports,e){},I0Ma:function(module,exports,e){},IXiA:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=i(e("oYk5")),a=i(e("w/1P")),o=i(e("yhVA")),u,l=function(e){function UrlEditView(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).onChangeUrl=function(e){var i=t.props,n=i.submissionPart,r=i.update,a=s.default.extend(!0,{},n);a.definition.url=e.target.value,r(a)},t.onChangeTitle=function(e){var i=t.props,n=i.submissionPart,r=i.update,a=s.default.extend(!0,{},n);a.definition.title=e.target.value,r(a)},t.onChangeCaption=function(e){var i=t.props,n=i.submissionPart,r=i.update,a=s.default.extend(!0,{},n);a.definition.caption=e.target.value,r(a)},t}var t;return(0,n.default)(UrlEditView,e),UrlEditView.prototype.render=function render(){var e=this.props,t=e.submissionPart,i=e.id;if("url"!==t.typeName)return null;return r.createElement("div",{className:"rc-UrlEditView"},r.createElement("input",{id:"input-".concat(i),className:"c-peer-review-submit-text-field c-peer-review-submit-text-field-group-top bt3-form-control",type:"text",placeholder:(0,o.default)("URL"),"aria-labelledby":i,defaultValue:t.definition.url,onChange:this.onChangeUrl,disabled:this.props.disabled}),t.definition.url&&r.createElement("div",null,r.createElement("div",{className:"c-peer-review-submit-text-field-container"},r.createElement("input",{className:(0,a.default)("c-peer-review-submit-text-field","c-peer-review-submit-text-field-group-middle","bt3-form-control"),type:"text",placeholder:(0,o.default)("Title"),defaultValue:t.definition.title,onChange:this.onChangeTitle,disabled:this.props.disabled}),!t.definition.title&&r.createElement("div",{className:"c-peer-review-submit-text-field-annotation"},(0,o.default)("optional"))),r.createElement("div",{className:"c-peer-review-submit-text-field-container"},r.createElement("textarea",{className:(0,a.default)("c-peer-review-submit-text-field","c-peer-review-submit-text-field-group-bottom","bt3-form-control"),placeholder:(0,o.default)("Caption"),defaultValue:t.definition.caption,onChange:this.onChangeCaption,disabled:this.props.disabled}),!t.definition.caption&&r.createElement("div",{className:"c-peer-review-submit-text-field-annotation"},(0,o.default)("optional")))))},UrlEditView}(r.Component);exports.default=l},JOPA:function(module,exports,e){var t=e("6qoN"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},r=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},KDBu:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=e("MnCE"),a=i(e("w/1P")),o=i(e("34yi")),u=i(e("y1LI")),l=e("Bgbc"),d=i(e("Ihj9")),c=e("C+yd"),m=i(e("8cuT")),p=i(e("yhVA")),f=e("kvW3"),b=e("JvZ4");e("ZAK3");var v=(0,d.default)({type:"BUTTON"})(l.Button),h=function(e){function AssignmentSubmitControls(){return e.apply(this,arguments)||this}var t;return(0,n.default)(AssignmentSubmitControls,e),AssignmentSubmitControls.prototype.render=function render(){var e=(0,a.default)("rc-AssignmentSubmitControls","horizontal-box","align-items-right","align-items-vertical-center"),t=this.props,i=t.computedItem,n=t.courseId,s=t.lastSaveTime,l=(0,c.getIsLockedForPremiumGrading)(i);return r.createElement("div",{className:e},r.createElement("div",{className:"save-state-display horizontal-box"},s&&s>0?r.createElement("div",{className:"color-secondary-text caption-text"},r.createElement(f.FormattedMessage,{message:(0,p.default)("Last saved on {lastSaveDate} at {lastSaveTime}"),lastSaveDate:(0,b.formatDateTimeDisplay)(s,b.LONG_DATE_ONLY_DISPLAY),lastSaveTime:(0,b.formatDateTimeDisplay)(s,b.TIME_ONLY_DISPLAY)})):r.createElement("div",{className:"color-secondary caption-text"},(0,p.default)("This project has not been saved."))),l&&r.createElement(o.default,{courseId:n,itemId:i.id}),!l&&r.createElement("div",null,r.createElement(v,{type:"secondary",rootClassName:"save-draft","data-e2e":"save-draft",disabled:this.props.isSaving||this.props.isSubmitting,onClick:this.props.onSave,trackingName:"save"},this.props.isSaving?r.createElement(u.default,{name:"spinner",className:"cif-spin"}):(0,p.default)("Save draft")),r.createElement(v,{type:"primary",rootClassName:"preview","data-e2e":"preview",onClick:this.props.onSubmit,disabled:this.props.isSaving||this.props.isSubmitting||this.props.isSubmitDisabled,trackingName:"submit"},this.props.isSubmitting?r.createElement(u.default,{name:"spinner",className:"cif-spin"}):this.props.submitMessage)))},AssignmentSubmitControls}(r.Component);h.defaultProps={submitMessage:(0,p.default)("Submit for review"),isSubmitDisabled:!1};var S=(0,s.compose)((0,m.default)(["CourseStore"],function(e){var t;return{courseId:e.CourseStore.getCourseId()}}))(h);exports.default=S},OUxc:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=i(e("8cuT")),a=i(e("VYij")),o=i(e("jsrg")),u=i(e("L1vm")),l=e("nLAy"),d=i(e("dAof")),c=i(e("JkvR")),m=i(e("kFiP")),p=i(e("y6VL")),f=i(e("talK")),b=i(e("sQ/U")),v=i(e("uxKl")),h=function(e){function PeerItemSubmit(){return e.apply(this,arguments)||this}var t;return(0,n.default)(PeerItemSubmit,e),PeerItemSubmit.prototype.render=function render(){var e=this.props,t=e.isSubmitted,i=e.latestSubmissionId,n=e.computedItem,s=e.loadedPeerViewSubmissionId,a=e.isResubmissionAllowed,o=s!==i;return r.createElement(p.default,{isSubmitted:t,editView:r.createElement(f.default,{computedItem:n}),submittedView:o?r.createElement(c.default,{className:"rc-PeerItemSubmit"}):r.createElement(m.default,{computedItem:n,isResubmissionAllowed:a})})},PeerItemSubmit}(r.Component),S,g=a.default.compose(u.default.createTrackedContainer(function(){return{namespace:{page:"peer_review_my_project"}}}),(0,s.default)(["CourseStore","PeerViewSubmissionStore","PeerPermissionsAndProgressesStore"],function(e,t){var i=e.CourseStore,n=e.PeerViewSubmissionStore,r=e.PeerPermissionsAndProgressesStore,s=t.computedItem;return{isPeerProgressesLoaded:"loaded"===r.getState().loadState,loadedPeerViewSubmissionId:n.getState().submissionId,isSubmitted:r.getState().isSubmitted,latestSubmissionId:r.getState().latestSubmissionId,courseId:i.getCourseId()}}),(0,o.default)(function(e){var t;return e.isPeerProgressesLoaded},r.createElement(c.default,{className:"rc-PeerItemSubmit"})),(0,d.default)(function(e,t){var i=t.computedItem,n=t.courseId,r=t.isSubmitted,s=t.latestSubmissionId,a=t.loadedPeerViewSubmissionId,o;r&&s&&(a!==s&&e.executeAction(l.loadSubmission,{userId:b.default.get().id,courseId:n,itemId:i.id,submissionId:s}))}))(h);exports.default=g},PmkO:function(module,exports,e){var t=e("I0Ma"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},r=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},QgSF:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=i(e("9can")),a=i(e("fK8H")),o=i(e("lSMu")),u=i(e("IXiA")),l=i(e("w4G/")),d=i(e("Ej69")),c=i(e("3aOx"));e("C6SX");var m,p=function(e){function SubmissionPartEditView(){return e.apply(this,arguments)||this}(0,n.default)(SubmissionPartEditView,e);var t=SubmissionPartEditView.prototype;return t.renderEditor=function renderEditor(){var e=this.props,t=e.courseId,i=e.partId,n=e.submissionPart,s=e.update,c=e.blockSubmit,m=e.disabled,p=e.isPartReceivingInlineFeedback;switch(n.typeName){case"plainText":return r.createElement(o.default,{submissionPart:n,partId:i,id:"input-".concat(i),update:s,disabled:m});case"richText":return r.createElement(a.default,{submissionPart:n,update:s,disabled:m,partId:i,courseId:t});case"url":return r.createElement(u.default,{submissionPart:n,id:i,update:s,disabled:m});case"fileUpload":return r.createElement(l.default,{id:"input-".concat(i),submissionPart:n,update:s,blockSubmit:c,disabled:m,isPartReceivingInlineFeedback:p});case"offPlatform":return r.createElement(d.default,null);default:return!1}},t.render=function render(){var e=this.props,t=e.submissionSchemaPart,i=e.errorTree,n=e.showValidation,a=e.renderInlineNode,o=e.partId,u=t.id;return r.createElement("div",{className:"rc-SubmissionPartEditView",id:u},r.createElement("div",{className:"c-peer-review-submit-prompt"},r.createElement(s.default,{content:t.prompt,assumeStringIsHtml:!0,contentId:o}),a&&a(o)),this.renderEditor(),n&&i&&r.createElement(c.default,{errorTree:i}))},SubmissionPartEditView}(r.Component);exports.default=p},R6Zj:function(module,exports,e){var t=e("Umxv"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},r=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},Umxv:function(module,exports,e){},VE4c:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=i(e("w/1P")),a=i(e("9can")),o=i(e("37kS"));e("1Nwa");var u=function(e){function AssignmentUpgradeChanges(){for(var t,i=arguments.length,n=new Array(i),u=0;u<i;u++)n[u]=arguments[u];return(t=e.call.apply(e,[this].concat(n))||this).renderChange=function(e,i){if("AddsPart"===e.typeName)return t.renderChangeItem(i,"cif-plus-square",(0,o.default)("Added question."),r.createElement("tr",{className:"bt3-success"},r.createElement("th",null,(0,o.default)("Added")),r.createElement("td",{className:"change-contents"},r.createElement("div",null,r.createElement(a.default,{assumeStringIsHtml:!0,content:e.definition.prompt})))));if("RemovesPart"===e.typeName)return t.renderChangeItem(i,"cif-minus-square",(0,o.default)("Removed question."),r.createElement("tr",{className:"bt3-danger"},r.createElement("th",null,(0,o.default)("Removed")),r.createElement("td",{className:"change-contents"},r.createElement("div",null,r.createElement(a.default,{assumeStringIsHtml:!0,content:e.definition.prompt})))));if("ChangesPart"===e.typeName){var n=e.definition.changes,u=n.find(function(e){return"ChangesPrompt"===e.typeName}),l=n.filter(function(e){return"ChangesPrompt"!==e.typeName});return t.renderChangeItem(i,"cif-square",(0,o.default)("Changed question."),[r.createElement("tr",{className:(0,s.default)({"bt3-danger":!!u}),key:"changedQuestionPrompt"},r.createElement("th",null,(0,o.default)("Original")),r.createElement("td",{className:"change-contents"},r.createElement("div",null,r.createElement(a.default,{assumeStringIsHtml:!0,content:e.definition.prompt})))),u&&t.renderPartChange(u,"promptChange"),l.map(t.renderPartChange),0===n.length&&(0,o.default)("Unknown change.")])}return null},t.renderPartChange=function(e,t){var i="ChangesPrompt"===e.typeName?(0,o.default)("New"):"",n=!1;return"ChangesPrompt"===e.typeName?n=r.createElement("div",{key:t},r.createElement(a.default,{assumeStringIsHtml:!0,content:e.definition.newPrompt})):"ChangesPoints"===e.typeName?n=(0,o.default)("The new version of this question has different point values."):"ChangesOptions"===e.typeName?n=(0,o.default)("The new version of this multiple choice question has different options."):"ChangesValidationRules"===e.typeName&&(n=(0,o.default)("The new version of this question allows a different set of responses.")),r.createElement("tr",{className:"ChangesPrompt"===e.typeName?"bt3-success":"bt3-warning",key:t},r.createElement("th",null,i),r.createElement("td",{className:"change-contents"},n))},t}(0,n.default)(AssignmentUpgradeChanges,e);var t=AssignmentUpgradeChanges.prototype;return t.excludeNoChangeChanges=function excludeNoChangeChanges(e){return e.filter(function(e){return"NoChange"!==e.typeName})},t.renderChangeGroup=function renderChangeGroup(e,t){var i=this.excludeNoChangeChanges(e);return 0!==i.length&&r.createElement("div",null,r.createElement("h2",null,t),r.createElement("ul",{className:"cif-list-ul"},i.map(this.renderChange)))},t.renderChangeItem=function renderChangeItem(e,t,i,n){return r.createElement("li",{className:"change-item",key:e},r.createElement("i",{className:t}),r.createElement("span",{className:"type-of-change"},i),r.createElement("div",{className:"change-table-container"},r.createElement("table",{className:"bt3-table"},r.createElement("tbody",null,n))))},t.render=function render(){return r.createElement("div",{className:"rc-AssignmentUpgradeChanges"},this.renderChangeGroup(this.props.upgradeToCurrentAssignment.submissionSchemaChanges,(0,o.default)("Assignment question changes")),this.renderChangeGroup(this.props.upgradeToCurrentAssignment.reviewSchemaChanges,(0,o.default)("Review question changes")))},AssignmentUpgradeChanges}(r.Component);u.propTypes={upgradeToCurrentAssignment:r.PropTypes.object.isRequired};var l=u;exports.default=l},XgYJ:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=t(e("VbXa")),n=t(e("SDZF")),r=e("QjDL"),s,a=function(e){function AlicePeerReviewSubmitEvent(t){var i,n=t.courseBranchId,s=t.itemId;return(i=e.call(this,{type:r.PEER_REVIEW_SUBMIT,courseBranchId:n})||this).itemId=s,i.id="".concat(r.PEER_REVIEW_SUBMIT,"~").concat(n,"~").concat(s),i}return(0,i.default)(AlicePeerReviewSubmitEvent,e),AlicePeerReviewSubmitEvent}(n.default);exports.default=a},ZAK3:function(module,exports,e){var t=e("Exuz"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},r=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},cbTo:function(module,exports,e){var t=e("zAPd"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},r=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},dN2h:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=t(e("VbXa")),n=t(e("SDZF")),r=e("QjDL"),s,a=function(e){function AlicePeerReviewSaveEvent(t){var i,n=t.courseBranchId,s=t.itemId;return(i=e.call(this,{type:r.PEER_REVIEW_SAVE,courseBranchId:n})||this).itemId=s,i.id="".concat(r.PEER_REVIEW_SAVE,"~").concat(n,"~").concat(s),i}return(0,i.default)(AlicePeerReviewSaveEvent,e),AlicePeerReviewSaveEvent}(n.default);exports.default=a},dPJa:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=i(e("welz")),s=t(e("sbe7")),a=i(e("9can")),o=i(e("CQyo")),u=i(e("37kS"));e("cbTo");var l=function(e){function GradingCriteriaPreviewModal(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={showModal:!1},t.onClickModalOpen=function(e){e.preventDefault(),t.setState({showModal:!0})},t.onClickModalClose=function(){t.setState({showModal:!1})},t}var t;return(0,n.default)(GradingCriteriaPreviewModal,e),GradingCriteriaPreviewModal.prototype.render=function render(){if(0===this.props.criteria.length)return null;return s.createElement("div",{className:"rc-GradingCriteriaPreviewModal"},s.createElement("button",{onClick:this.onClickModalOpen,className:"button-link"},(0,u.default)("Preview grading criteria")),this.state.showModal&&s.createElement(o.default,{handleClose:this.onClickModalClose,modalName:(0,u.default)("Preview grading criteria")},s.createElement("h1",null,(0,u.default)("Preview grading criteria")),this.props.privilegedRoleViewReviewSchema&&s.createElement("div",{className:"criteria-warning color-warn-dark"},(0,u.default)("You can preview the grading criteria because you have a privileged role in this course. Normal\n                  learners cannot see the grading criteria until they submit a submission.")),this.props.criteria.map(function(e){return s.createElement("div",{className:"criterion card-no-action compact",key:e.get("id")},s.createElement(a.default,{content:e.get("prompt"),assumeStringIsHtml:!1}))})))},GradingCriteriaPreviewModal}(s.Component);l.propTypes={criteria:s.PropTypes.arrayOf(s.PropTypes.instanceOf(r.default.Model)).isRequired,privilegedRoleViewReviewSchema:s.PropTypes.bool.isRequired};var d=l;exports.default=d},f8IG:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=e("MnCE"),a=i(e("8cuT")),o=i(e("pNKQ")),u=e("ih6J"),l=i(e("sQ/U")),d=function(e){function PeerItemUpgradeNotification(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).onRequestUpgrade=function(){var e=t.props,i=e.courseId,n=e.courseSlug,r=e.computedItem.id,s=e.submission,a=e.assignmentVersion,o=e.forceUpgradeToAssignmentVersion;t.context.executeAction(u.upgradeSubmission,{itemId:r,submission:s,assignmentVersion:a,forceUpgradeToAssignmentVersion:o,courseId:i,courseSlug:n,userId:l.default.get().id})},t}var t;return(0,n.default)(PeerItemUpgradeNotification,e),PeerItemUpgradeNotification.prototype.render=function render(){if(null==this.props.upgradeToCurrentAssignment)return null;return r.createElement("div",{className:"rc-PeerItemUpgradeNotification"},r.createElement(o.default,{onRequestUpgrade:this.onRequestUpgrade,upgradeToCurrentAssignment:this.props.upgradeToCurrentAssignment,showStaleAssignmentVersionError:this.props.showStaleAssignmentVersionError}))},PeerItemUpgradeNotification}(r.Component);d.contextTypes={executeAction:r.PropTypes.func.isRequired};var c=(0,s.compose)((0,a.default)(["PeerSubmissionDraftStore","CourseStore"],function(e){var t=e.PeerSubmissionDraftStore,i=e.CourseStore,n,r=t.getState().latestSubmissionAndRelated,s=null,a=null,o=null;return null!=r&&(s=r.upgradeToCurrentAssignment,a=r.submissionSchema.assignmentVersion,o=r.upgradeToCurrentAssignment&&r.upgradeToCurrentAssignment.upgradeToVersion),{submission:r&&r.submission,upgradeToCurrentAssignment:s,assignmentVersion:a,forceUpgradeToAssignmentVersion:o,courseId:i.getCourseId(),courseSlug:i.getCourseSlug()}}))(d);exports.default=c},fK8H:function(module,exports,e){"use strict";var t=e("TqRt"),i=e("284h");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("sbe7")),r=t(e("oYk5")),s=t(e("sIXp")),a=t(e("KcZu")),o,u=function RichTextEditView(e){var t=e.courseId,i=e.submissionPart,o=e.update,u=e.disabled,l=e.partId;if("richText"!==i.typeName)return null;var d=i.definition.richText.typeName,c="cml"===d?s.default:a.default,m=function mapContentFn(e){return e},p=i.definition.richText;return"html"===d&&(p=i.definition.richText.definition,m=function mapContentFn(e){return{typeName:"html",definition:e}}),n.createElement("div",{className:"rc-RichTextEditView"},!u&&n.createElement(c,{content:p,courseId:t,itemId:l,onChange:function onChange(e){var t=r.default.extend(!0,{},i);t.definition.richText=m(e),o(t)}}),u&&n.createElement(c,{content:p,courseId:t,itemId:l,onChange:function onChange(e){var t=r.default.extend(!0,{},i);t.definition.richText=m(e),o(t)}}))};exports.default=u},gOLI:function(module,exports,e){},i5JE:function(module,exports,e){var t=e("9KgU"),i;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},r=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},ih6J:function(module,exports,e){"use strict";var t=e("284h");Object.defineProperty(exports,"__esModule",{value:!0}),exports.submitSubmission=exports.upgradeSubmission=exports.resetSubmission=exports.saveSubmission=exports.localUpdateSubmission=exports.onSaveFailure=exports.onSaveSuccess=void 0;var i=t(e("y2bh")),n=t(e("Xl8Z")),r=e("6iKz"),s=e("wi/V"),a=e("oucI"),o=function onSaveSuccess(e){return function(t){return e.dispatch(a.ActionNames.PEER_SUBMIT_UPDATE_ALERTS,{severity:"warning"}),e.dispatch(a.ActionNames.PEER_SUBMIT_UPDATE_LATEST_SUBMISSION_DRAFT,{latestSubmissionAndRelated:t}),e.dispatch(a.ActionNames.PEER_SUBMISSION_APP_STATE_SAVE_SUCCESS),t}};exports.onSaveSuccess=o;var u=function onSaveFailure(e){return function(t){if(t.responseJSON||t.status)return e.dispatch(a.ActionNames.PEER_SUBMISSION_APP_STATE_SAVE_ERROR,{statusCode:t.status,response:t.responseJSON}),null;throw t}};exports.onSaveFailure=u;var l=function localUpdateSubmission(e,t){var i=t.submission;e.dispatch(a.ActionNames.PEER_SUBMIT_LOCAL_UPDATE_DRAFT_SUBMISSION,{submission:i})};exports.localUpdateSubmission=l;var d=function updateSubmissionDraft(e){var t=e.userId,n=e.courseId,r=e.itemId,s=e.submission;if(null==s.versionedAssignmentId)throw new Error("Error saving draft submission: could not find existing assignment id");return i.updateSubmissionDraft({userId:t,courseId:n,itemId:r,submissionDraftUpdate:{submission:{title:s.definition.title,parts:s.definition.parts},attachedAssignmentId:s.versionedAssignmentId}})},c=function saveSubmission(e,t){var i=t.userId,n=t.courseId,r=t.itemId,l=t.submission,c=t.assignmentVersion;return e.dispatch(a.ActionNames.PEER_SUBMISSION_APP_STATE_SAVING),d({userId:i,courseId:n,itemId:r,submission:l}).then(function(e){return(0,s.convertNaptimeSubmissionDraftToOwnSubmission)(e)}).then(o(e),u(e))};exports.saveSubmission=c;var m=function resetSubmission(e,t){var i=t.courseId,s=t.courseSlug,a=t.userId,o=t.itemId,u=t.submissionId;return n.deleteSubmission({userId:a,courseId:i,itemId:o,submissionId:u}).then(function(){return e.executeAction(r.refreshSubmissionAndProgress,{itemId:o,userId:a,courseId:i,courseSlug:s})})};exports.resetSubmission=m;var p=function upgradeSubmission(e,t){var n=t.assignmentVersion,a=t.forceUpgradeToAssignmentVersion,o=t.itemId,l=t.courseId,c=t.courseSlug,m=t.userId,p=t.submission;if(null==p.versionedAssignmentId)throw new Error("Error upgrading assignment: could not find existing assignment id");var f="".concat(p.versionedAssignmentId.split("@")[0],"@").concat(a);return i.forceUpgradedSubmissionDraft({userId:m,courseId:l,itemId:o,forceUpgradeToAssignmentId:f}).then(function(e){return(0,s.convertRawSubmissionDraft)(e)}).then(function(e){return d({itemId:o,submission:e,courseId:l,userId:m})}).then(function(e){return(0,s.convertNaptimeSubmissionDraftToOwnSubmission)(e)}).catch(u(e)).then(function(){return e.executeAction(r.refreshSubmissionAndProgress,{itemId:o,userId:m,courseId:l,courseSlug:c})})};exports.upgradeSubmission=p;var f=function submitSubmission(e,t){var i=t.itemId,l=t.submission,c=t.assignmentVersion,m=t.verifiableId,p=t.courseId,f=t.courseSlug,b=t.userId;return e.dispatch(a.ActionNames.PEER_SUBMISSION_APP_STATE_SUBMITTING),d({itemId:i,submission:l,courseId:p,userId:b}).then(function(e){return(0,s.convertNaptimeSubmissionDraftToOwnSubmission)(e)}).then(o(e),u(e)).then(function(e){var t=!1;if(e&&e.errorTree&&e.errorTree.errors&&(t=!!e.errorTree.errors.find(function(e){return e.blocksSubmit})),t||!e)throw new Error("submit blocked by errors");return e}).then(function(e){return n.submitSubmission({courseId:p,itemId:i,verifiableId:m,draftCreatedAt:e.submission.createdAt})}).then(function(){return e.dispatch(a.ActionNames.PEER_SUBMISSION_APP_STATE_SUBMIT_SUCCESS),e.executeAction(r.refreshSubmissionAndProgress,{itemId:i,userId:b,courseId:p,courseSlug:f})}).catch(function(){return e.dispatch(a.ActionNames.PEER_SUBMISSION_APP_STATE_SUBMIT_ERROR)})};exports.submitSubmission=f},kFiP:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("8cuT")),r=t(e("sbe7")),s=i(e("VYij")),a=i(e("L1vm")),o=i(e("vPwT")),u=i(e("jsrg")),l=i(e("0xvN")),d=i(e("UjVa")),c=i(e("s2tf")),m=i(e("9zHD")),p=i(e("4qA7")),f=function PeerItemSubmittedView(e){var t=e.lastSaveTime,i=e.computedItem,n=e.title,s=e.submissionId,a=e.courseBranchId,u=e.courseId,m=e.isResubmissionAllowed;return r.createElement("div",{className:"rc-PeerItemSubmittedView rc-AssignmentSubmit"},r.createElement(c.default,{itemId:i.id,courseBranchId:a,courseId:u,hasSubmitted:!0}),r.createElement(l.default,{title:n,createdAt:t,shareableLink:r.createElement(d.default,{computedItem:i,submissionId:s})}),r.createElement(o.default,{courseId:u,computedItem:i,isResubmissionAllowed:m}))},b=s.default.compose((0,n.default)(["PeerViewSubmissionStore",m.default,p.default],function(e){var t=e.PeerViewSubmissionStore,i=e.CourseStore,n=e.SessionStore,r,s,a;return t.getState().submissionAndRelated&&(a=t.getState().submissionAndRelated.submission.definition.title,s=t.getState().submissionAndRelated.submission.id,r=t.getState().submissionAndRelated.submission.createdAt),{title:a,submissionId:s,lastSaveTime:r,courseId:i.getCourseId(),courseBranchId:n.getBranchId()||i.getCourseId()}}),(0,u.default)(function(e){return e.submissionId}),a.default.createTrackedContainer(function(){return{namespace:{page:"peer_review_my_project_review"}}}))(f);exports.default=b},lSMu:function(module,exports,e){"use strict";var t=e("TqRt"),i=e("284h");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("sbe7")),r=t(e("oYk5")),s,a=function PlainTextEditView(e){var t=e.submissionPart,i=e.update,s=e.disabled,a=e.partId,o=e.id;if("plainText"!==t.typeName)return null;return n.createElement("textarea",{id:o,defaultValue:t.definition.plainText,className:"c-peer-review-submit-text-field bt3-form-control","aria-labelledby":a,onChange:function onChange(e){var n=r.default.extend(!0,{},t);n.definition.plainText=e.target.value,i(n)},disabled:s})};exports.default=a},pNKQ:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=i(e("w/1P")),s=t(e("sbe7")),a=i(e("17x9")),o=i(e("CQyo")),u=i(e("VE4c")),l=i(e("37kS")),d=function(e){function AssignmentUpgradeNotification(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={modalOpen:!1},t.onClickSeeChanges=function(){t.setState({modalOpen:!0})},t.onClickUpgrade=function(){t.onModalClose(),t.props.onRequestUpgrade()},t.onModalClose=function(){t.setState({modalOpen:!1})},t}(0,n.default)(AssignmentUpgradeNotification,e);var t=AssignmentUpgradeNotification.prototype;return t.renderAlert=function renderAlert(){var e=(0,r.default)({"bt3-alert":!0,"bt3-alert-info":!this.props.showStaleAssignmentVersionError,"bt3-alert-danger":this.props.showStaleAssignmentVersionError});return s.createElement("div",{className:e},(0,l.default)("A new version of this assignment exists.")," ",s.createElement("button",{type:"button",className:"button-link",onClick:this.onClickSeeChanges},(0,l.default)("Click here to see the changes and get the new version.")))},t.renderModal=function renderModal(){if(this.state.modalOpen){var e=this.props.upgradeToCurrentAssignment,t=!1,i=!1;return null!=e&&("NotifiesUser"===e.severity?(t=(0,l.default)("Upgrade assignment"),i=s.createElement("p",null,(0,l.default)('\n                The assignment changed since you started working on it. Click\n                "Upgrade assignment" to get the new assignment. Please read the\n                new assignment carefully and update your submission to follow\n                the new instructions.\n              '))):"ClearsSubmission"===e.severity&&(t=(0,l.default)("Delete draft and upgrade assignment"),i=s.createElement("p",null,(0,l.default)("\n                The assignment changed since you started working on it. We need\n                to delete your draft to give you the new assignment.\n              ")," ",s.createElement("strong",null,(0,l.default)("\n                  Please save a copy of your submission outside Coursera before\n                  continuing.\n                "))," ",(0,l.default)('\n                Click "Delete draft and upgrade assignment" to get the new\n                assignment. If you’d like to not update your assignment, you can click “Cancel” and submit your answers on the old version.\n              ')))),s.createElement(o.default,{handleClose:this.onModalClose,modalName:(0,l.default)("New assignment version")},s.createElement("div",{className:"rc-AssignmentUpgradeNotification assignment-upgrade-explanation"},s.createElement("h3",null,(0,l.default)("New assignment version")),i,null!=this.props.upgradeToCurrentAssignment&&s.createElement(u.default,{upgradeToCurrentAssignment:this.props.upgradeToCurrentAssignment}),s.createElement("div",{className:"c-modal-action-bar"},s.createElement("button",{type:"button",className:"bt3-btn c-modal-action-button",onClick:this.onModalClose},(0,l.default)("Cancel")),s.createElement("button",{type:"button",className:"bt3-btn bt3-btn-success c-modal-action-button",onClick:this.onClickUpgrade},t))))}return null},t.render=function render(){var e=this.props.upgradeToCurrentAssignment;return e&&"AutomaticallyUpgrades"!==e.severity?s.createElement("div",{className:"rc-AssignmentUpgradeNotification"},this.renderAlert(),this.renderModal()):null},AssignmentUpgradeNotification}(s.Component);d.propTypes={onRequestUpgrade:a.default.func.isRequired,showStaleAssignmentVersionError:a.default.bool.isRequired,upgradeToCurrentAssignment:a.default.object};var c=d;exports.default=c},s2tf:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=t(e("dN2h")),n=t(e("XgYJ")),r,s=(0,t(e("DiLM")).default)(function(e){var t=e.itemId,r=e.courseBranchId,s=e.courseId,a=e.hasSaved,o=e.hasSubmitted;if(a)return new i.default({courseBranchId:r,itemId:t});if(o)return new n.default({courseBranchId:r,itemId:t});return null},function(e){var t;return{course_id:e.courseId}})(function(){return null});exports.default=s},sIXp:function(module,exports,e){"use strict";var t=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=t(e("VbXa")),n=t(e("sbe7")),r=t(e("w/1P")),s=t(e("WSZT")),a=t(e("Dyy4")),o=t(e("JUgE"));e("R6Zj");var u,l=function(e){function RichTextCMLEditor(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={isFocused:!1},t.onFocus=function(){t.setState({isFocused:!0})},t.onBlur=function(){t.setState({isFocused:!1})},t}var t;return(0,i.default)(RichTextCMLEditor,e),RichTextCMLEditor.prototype.render=function render(){if(this.props.disabled)return n.default.createElement(o.default,{cml:this.props.content});var e=this.state.isFocused;return n.default.createElement("div",{className:(0,r.default)("rc-RichTextCmlEditor",{focused:e})},n.default.createElement(s.default,{blocks:a.default.richTextBlocks,onFocus:this.onFocus,onBlur:this.onBlur,changeDelay:0,cml:this.props.content,imageUploadOptions:a.default.getImageUploadOptions(this.props.courseId,this.props.itemId),onChange:this.props.onChange}))},RichTextCMLEditor}(n.default.Component);exports.default=l},talK:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("MVZn")),r=i(e("VbXa")),s=t(e("sbe7")),a=i(e("VXRf")),o=i(e("kwmr")),u=i(e("oYk5")),l=i(e("VYij")),d=i(e("+LJP")),c=i(e("jsrg")),m=e("ih6J"),p=e("0DRP"),f=e("L7AI"),b=i(e("paF6")),v=i(e("9zHD")),h=i(e("4qA7")),S=i(e("JkvR")),g=i(e("f8IG")),I=i(e("3aJm")),E=i(e("tvdM")),w=i(e("3l+J")),P=i(e("B2B+")),A=i(e("sQ/U")),y=i(e("s2tf")),T=e("C+yd"),C=function(e){function PeerItemEditView(t,i){var n;return(n=e.call(this,t,i)||this).handleSubmit=function(e){var t=n.props,i=t.computedItem,r=t.latestSubmissionAndRelated,s=t.courseId,a=t.courseSlug;n.context.executeAction(m.submitSubmission,{itemId:i.id,submission:r.submission,assignmentVersion:r.submissionSchema.assignmentVersion,verifiableId:e,courseId:s,courseSlug:a,userId:A.default.get().id})},n.handleSave=function(){var e=n.props,t=e.computedItem,i=e.latestSubmissionAndRelated,r=e.courseId;n.setState({hasSaved:!0}),n.context.executeAction(m.saveSubmission,{courseId:r,userId:A.default.get().id,itemId:t.id,submission:i.submission,assignmentVersion:i.submissionSchema.assignmentVersion})},n.updateSubmissionPartGenerator=function(e){return function(t){var i=n.props.latestSubmissionAndRelated,r=u.default.extend(!0,{},i.submission);r.definition.parts[e]=t,n.context.executeAction(m.localUpdateSubmission,{submission:r})}},n.blockSubmitPartGenerator=function(e){return function(t){var i=n.state.blockSubmitParts,r=Object.assign({},i);r[e]=t,n.setState({blockSubmitParts:r})}},n.updateSubmissionTitle=function(e){var t=n.props.latestSubmissionAndRelated,i=u.default.extend(!0,{},t.submission);i.definition.title=e,n.context.executeAction(m.localUpdateSubmission,{submission:i})},n.renderPreviewGradingCriteria=function(e){var t=n.props.latestSubmissionAndRelated;return s.createElement(P.default,{reviewSchema:t.reviewSchema,partId:e})},n.state={hasSaved:!1,blockSubmitParts:{}},n}var t;return(0,r.default)(PeerItemEditView,e),PeerItemEditView.prototype.render=function render(){var e=this.props,t=e.naptimeSubmission,i=e.naptimeSubmissionSchema,n=e.errorTree,r=e.computedItem,a=e.submissionAppState,o=e.isVerifiable,u=e.lastSaveTime,d=e.showStaleAssignmentVersionError,c=e.courseId,m=e.courseBranchId,p=r.id,f=this.state.hasSaved,b=l.default.contains(l.default.values(this.state.blockSubmitParts),!0);return s.createElement("div",{className:"rc-PeerItemEditView"},s.createElement(y.default,{itemId:p,courseBranchId:m,courseId:c,hasSaved:f}),s.createElement(E.default,{submissionAppState:a,errorTree:n,isSubmitted:!1},s.createElement(g.default,{showStaleAssignmentVersionError:d,computedItem:r}),s.createElement(w.default,{courseId:c,submission:t,submissionSchema:i,errorTree:n,isSubmitted:!1,submissionAppState:a,updateSubmissionTitle:this.updateSubmissionTitle,updateSubmissionPartGenerator:this.updateSubmissionPartGenerator,blockSubmitPartGenerator:this.blockSubmitPartGenerator,renderInlineNode:this.renderPreviewGradingCriteria}),s.createElement(I.default,{submissionAppState:a,lastSaveTime:u,handleSave:this.handleSave,handleSubmit:this.handleSubmit,blockSubmit:b,isVerifiable:o,computedItem:r})))},PeerItemEditView}(s.Component);C.contextTypes={executeAction:s.PropTypes.func.isRequired};var R=l.default.compose((0,d.default)(function(e){return{showStaleAssignmentVersionError:!!e.location.query.showStaleAssignmentVersionError}}),(0,o.default)([p.store,f.store,b.default,v.default,h.default],function(e,t,i,n,r,s){var a=s.computedItem;return{latestSubmissionAndRelated:e.getState().latestSubmissionAndRelated,naptimeSubmission:e.getState().naptimeSubmission,naptimeSubmissionSchema:e.getState().naptimeSubmissionSchema,submissionAppState:t.getState(),isVerifiable:i.isProductVerificationEnabled()&&a&&(0,T.getIsGradable)(a),courseId:n.getCourseId(),courseSlug:n.getCourseSlug(),courseBranchId:r.getBranchId()||n.getCourseId()}}),(0,c.default)(function(e){var t;return e.latestSubmissionAndRelated},s.createElement(S.default,{className:"rc-PeerItemEditView"})),(0,a.default)(function(e){return(0,n.default)({},e,{errorTree:e.latestSubmissionAndRelated.errorTree,lastSaveTime:e.latestSubmissionAndRelated.submission&&e.latestSubmissionAndRelated.submission.createdAt})}))(C);exports.default=R},tvdM:function(module,exports,e){"use strict";var t=e("TqRt"),i=e("284h");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("sbe7")),r=t(e("v1GV")),s=t(e("yhVA")),a=function EditView(e){var t=e.submissionAppState,i=e.errorTree,s=e.isSubmitted,a=e.children;return n.createElement("div",{className:"rc-AssignmentEditView rc-AssignmentSubmit"},n.createElement(r.default,{isSubmitted:s,submissionAppState:t,errorTree:i}),n.createElement("div",null,a))};a.propTypes={submissionAppState:n.PropTypes.object,errorTree:n.PropTypes.object,isSubmitted:n.PropTypes.bool,children:n.PropTypes.node};var o=a;exports.default=o},v1GV:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=i(e("VYij")),a=i(e("w/1P")),o=i(e("yhVA")),u=function(e){function AssignmentSubmitAlertsView(){return e.apply(this,arguments)||this}var t;return(0,n.default)(AssignmentSubmitAlertsView,e),AssignmentSubmitAlertsView.prototype.render=function render(){var e=this.props,t=e.isSubmitted,i=e.submissionAppState,n=i.submitState,u=i.saveState,l=i.showValidation,d=i.errorMessage,c=e.errorTree;if(!c||!l)return null;if(t)return r.createElement("div",{className:"rc-AssignmentSubmitAlertsView"},(0,o.default)("Your work is submitted."));var m=(0,s.default)(AssignmentSubmitAlertsView.getAllErrors(c)).some(s.default.property("blocksSubmit")),p=!!d,f=!d&&"ready"===n&&"ready"===u&&m,b=!d&&"saveError"===u&&!d,v=!d&&"submitError"===n&&"ready"===u&&m,h=!d&&"submitError"===n&&"ready"===u&&!m,S=(0,a.default)("rc-AssignmentSubmitAlertsView","bt3-alert",{"bt3-alert-warning":f,"bt3-alert-danger":p||b||v||h});if(!(p||f||b||v||h))return null;return r.createElement("div",{className:S},p&&r.createElement("span",null,d),v&&r.createElement("span",null,(0,o.default)("Error submitting assignment: please fix the errors below before submitting.")),f&&r.createElement("span",null,(0,o.default)("Your assignment was saved, but please fix the errors below before submitting.")),h&&r.createElement("span",null,(0,o.default)("Your assignment was saved, but an unknown error occurred while submitting.\n              Please refresh the page and try again.")),b&&r.createElement("span",null,(0,o.default)("Save error. Please try again.")))},AssignmentSubmitAlertsView}(r.Component);u.propTypes={errorTree:r.PropTypes.object,isSubmitted:r.PropTypes.bool.isRequired,submissionAppState:r.PropTypes.shape({saveState:r.PropTypes.oneOf(["ready","saving","saveError"]),submitState:r.PropTypes.oneOf(["ready","submitting","submitError"]),showValidation:r.PropTypes.bool})},u.getAllErrors=function(e){if(!e)return[];var t=(0,s.default)(e.children).chain().map(function(e){return u.getAllErrors(e)}).flatten().value();return e.errors.concat(t)};var l=u;exports.default=l},v3Zo:function(module,exports,e){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SAVE_ERROR=exports.SAVING=exports.READY=exports.SUBMIT_ERROR=exports.SUBMITTING=exports.default=void 0;var t={SUBMITTING:"submitting",SUBMIT_ERROR:"submitError",READY:"ready",SAVING:"saving",SAVE_ERROR:"saveError"},i=t;exports.default=i;var n=t.SUBMITTING,r=t.SUBMIT_ERROR,s=t.READY,a=t.SAVING,o=t.SAVE_ERROR;exports.SAVE_ERROR=o,exports.SAVING=a,exports.READY=s,exports.SUBMIT_ERROR=r,exports.SUBMITTING=n},vPwT:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=i(e("8cuT")),a=i(e("VYij")),o=i(e("yhVA")),u=i(e("NVuj")),l=i(e("Fp6O")),d=i(e("D1gF")),c=i(e("Nw0Z")),m=i(e("0/FW")),p=i(e("JkvR")),f=i(e("5xxS")),b=i(e("gZcO")),v=i(e("XNO9")),h=i(e("jsrg")),S=e("C+yd");e("PmkO");var g=function(e){function PeerSubmissionWithReviewBody(){return e.apply(this,arguments)||this}(0,n.default)(PeerSubmissionWithReviewBody,e);var t=PeerSubmissionWithReviewBody.prototype;return t.shouldShowReviews=function shouldShowReviews(e){var t=this.props,i=t.reviewProgress,n=t.reviewSchema,r=t.reviews,s=t.computedItem,o;if(0===(null!=n?(0,a.default)(n.definition.parts).filter(function(t){return t.submissionSchemaPartId===e}):[]).length||(0,S.shouldHideGrade)(s))return!1;return!!r&&r.length>0&&(!i||i&&i.isComplete)},t.render=function render(){var e=this,t=this.props,i=t.courseId,n=t.computedItem,s=t.submission,a=t.submissionId,d=t.submissionSchema,p=t.reviewSchema,h=t.reviewsSummary,S=t.reviews,g=t.isResubmissionAllowed,I=(0,c.default)(p);return r.createElement("div",{className:"rc-PeerSubmissionWithReviewsBody"},d.parts.map(function(t){return r.createElement(b.default,{key:t.id},r.createElement(u.default,{submissionSchemaPart:t,submissionPart:s.parts[t.id]}),e.shouldShowReviews(t.id)&&r.createElement(v.default,null,r.createElement(l.default,{reviewSchema:I,reviewsSummary:h,reviews:S,submissionSchemaPartId:t.id,submissionId:a})))}),this.shouldShowReviews()&&r.createElement(b.default,null,r.createElement(v.default,null,r.createElement(l.default,{reviewSchema:I,reviewsSummary:h,reviews:S,submissionSchemaPartId:null,submissionId:a}))),null!==a&&g&&r.createElement(f.default,{computedItem:n,submissionId:a,className:"align-right",buttonMessage:(0,o.default)("Edit submission")}),null!=a&&r.createElement(m.default,{computedItem:n,courseId:i,submissionId:a}))},PeerSubmissionWithReviewBody}(r.Component),I=a.default.compose((0,s.default)(["PeerViewSubmissionStore","PeerPermissionsAndProgressesStore"],function(e){var t=e.PeerViewSubmissionStore,i=e.PeerPermissionsAndProgressesStore,n=t.getState().submissionAndRelated,r,s=t.getState().reviewSubmissionState,a="loaded"===t.getState().loadState,o;a&&null!=s&&(o=s.backboneReviews);var u=i.getState().receivedReviewProgresses,l=u&&u.evaluationIfReady?{typeName:"structured",definition:u.evaluationIfReady.aggregatedReviewsSummary}:null,d=u?{isComplete:!!u.evaluationIfReady,earliestCompletionTime:u.earliestCompletionTime,reviewCount:u.reviewCount,minCompletionReviewCount:u.defaultReceivedReviewRequiredCount}:null;return{submission:t.getState().naptimeSubmission,submissionId:t.getState().submissionId,reviews:o,reviewSchema:n&&n.reviewSchema,submissionSchema:t.getState().naptimeSubmissionSchema,reviewsSummary:l,reviewProgress:d,isPeerViewSubmissionStoreLoaded:a}}),(0,h.default)(function(e){return e.isPeerViewSubmissionStoreLoaded},r.createElement(p.default,{className:"rc-PeerSubmissionWithReviewsBody"})))(g);exports.default=I},y6VL:function(module,exports,e){"use strict";var t=e("284h"),i=e("TqRt");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=i(e("VbXa")),r=t(e("sbe7")),s=i(e("KwvP")),a=function(e){function AssignmentSubmitWrapper(){return e.apply(this,arguments)||this}(0,n.default)(AssignmentSubmitWrapper,e);var t=AssignmentSubmitWrapper.prototype;return t.componentDidMount=function componentDidMount(){s.default.scroll(0)},t.render=function render(){return this.props.isSubmitted?this.props.submittedView:this.props.editView},AssignmentSubmitWrapper}(r.Component);a.propTypes={isSubmitted:r.PropTypes.bool.isRequired,submittedView:r.PropTypes.node.isRequired,editView:r.PropTypes.node.isRequired};var o=a;exports.default=o},zAPd:function(module,exports,e){}}]);
//# sourceMappingURL=30.87d9cc3b65ad84af3810.js.map